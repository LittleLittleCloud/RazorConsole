@namespace RazorConsole.Components

@using Microsoft.AspNetCore.Components
@using RazorConsole.Components
@using RazorConsole.Gallery.Models
@using Spectre.Console

<Border Header="Razor Component Output" HeaderColor=@Color.LightSteelBlue1 BorderColor=@Color.Grey93>
    <Text Style="mediumspringgreen bold" Value="@GreetingTitle" />
    <Newline />
    <Text Style="grey53" Value="@DateLabel" />
    <Newline />

    @if (HasTips)
    {
        <Border BorderColor=@Color.BlueViolet Header="Tips">
            @foreach (var tip in Model.Tips)
            {
                <RazorConsole.Components.Text Style="grey53 italic" Value="@tip" />
                <Newline />
            }
        </Border>
    }
    else
    {
        <Border BorderColor=@Color.Aqua Header="No Tips">
            <Text Style="grey53 italic" Value="No tips available yet." />
            <Newline />
        </Border>
    }

    <Spacer Lines="1" FillCharacter="-" />

    <Spinner Message="Awaiting your input..." Style="yellow" SpinnerType="Arc" />

    <Spacer Lines="1" />

    <Text Style="italic" Value="Enter a name below to refresh the greeting." />
    <Newline />
</Border>

@code {
    [Parameter]
    public required GreetingModel Model { get; set; }

    private string DisplayName => string.IsNullOrWhiteSpace(Model.Name) ? "Friend" : Model.Name;

    private string GreetingTitle => $"Hello, {DisplayName}!";

    private string DateLabel => Model.Date.ToString("dddd, MMMM d, yyyy");

    private string TimestampLabel => Model.Timestamp.ToString("HH:mm:ss");

    private bool HasTips => Model.Tips.Count > 0;
}