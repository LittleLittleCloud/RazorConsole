@namespace RazorConsole.Components

@using Microsoft.AspNetCore.Components
@using RazorConsole.Components
@using RazorConsole.Gallery.Models
@using Spectre.Console

<Rows Gap="1" Expand="true">
    <Panel Title="Greeting" TitleColor=@Color.LightSteelBlue1 BorderColor=@Color.Grey93>
        <Rows Gap="1">
            <RazorConsole.Components.Text Style="mediumspringgreen bold" Value="@GreetingTitle" />
            <RazorConsole.Components.Text Style="grey53" Value="@TimestampMessage" />

            <Grid Columns="2" Spacing="2">
                <RazorConsole.Components.Text Style="grey53 bold" Value="Recipient" />
                <RazorConsole.Components.Text Style="grey53" Value="@DisplayName" />
                <RazorConsole.Components.Text Style="grey53 bold" Value="Date" />
                <RazorConsole.Components.Text Style="grey53" Value="@DateLabel" />
                <RazorConsole.Components.Text Style="grey53 bold" Value="Time" />
                <RazorConsole.Components.Text Style="grey53" Value="@TimestampLabel" />
            </Grid>
        </Rows>
    </Panel>

    <Panel Title="Layout Showcase" TitleColor=@Color.LightSkyBlue1 BorderColor=@Color.CornflowerBlue Orientation="Horizontal">
        <Columns Spacing="4" Alignment="Center">
            <Panel Title="Rows" TitleColor=@Color.MediumSpringGreen BorderColor=@Color.MediumSpringGreen Orientation="Vertical">
                <Rows Gap="1">
                    <RazorConsole.Components.Text Style="grey53" Value="Stack sections vertically with optional spacing." />
                    <Rows Gap="0">
                        <RazorConsole.Components.Text Style="chartreuse2" Value="• Greeting" />
                        <RazorConsole.Components.Text Style="chartreuse2" Value="• Status" />
                        <RazorConsole.Components.Text Style="chartreuse2" Value="• Tips" />
                    </Rows>
                </Rows>
            </Panel>

            <Panel Title="Columns" TitleColor=@Color.Gold1 BorderColor=@Color.Gold1 Orientation="Vertical">
                <Columns Spacing="4" Alignment="Center">
                        <Rows Gap="1">
                            <RazorConsole.Components.Text Style="grey53" Value="Left" />
                            <RazorConsole.Components.Text Style="grey53" Value="Stay beside peers on wide consoles." />
                        </Rows>
                        <Rows Gap="1">
                            <RazorConsole.Components.Text Style="grey53" Value="Right" />
                            <RazorConsole.Components.Text Style="grey53" Value="Columns manage spacing automatically." />
                        </Rows>
                </Columns>
            </Panel>

            <Panel Title="Grid" TitleColor=@Color.DeepSkyBlue1 BorderColor=@Color.DeepSkyBlue1 Orientation="Vertical">
                <Grid Columns="2" Spacing="1">
                    <RazorConsole.Components.Text Style="grey53 bold" Value="Section" />
                    <RazorConsole.Components.Text Style="grey53 bold" Value="Purpose" />
                    <RazorConsole.Components.Text Style="grey53" Value="Greeting" />
                    <RazorConsole.Components.Text Style="grey53" Value="Personal hello" />
                    <RazorConsole.Components.Text Style="grey53" Value="Layouts" />
                    <RazorConsole.Components.Text Style="grey53" Value="Component tour" />
                    <RazorConsole.Components.Text Style="grey53" Value="Status" />
                    <RazorConsole.Components.Text Style="grey53" Value="Live updates" />
                </Grid>
            </Panel>
        </Columns>
    </Panel>

    @if (HasTips)
    {
        <Panel Title="Tips" TitleColor=@Color.BlueViolet BorderColor=@Color.BlueViolet>
            <Rows Gap="1">
                @foreach (var tip in Model.Tips)
                {
                    <RazorConsole.Components.Text Style="grey53 italic" Value="@tip" />
                }
            </Rows>
        </Panel>
    }
    else
    {
        <Panel Title="Tips" TitleColor=@Color.Aqua BorderColor=@Color.Aqua>
            <RazorConsole.Components.Text Style="grey53 italic" Value="No tips available yet." />
        </Panel>
    }

    <Panel Title="Live Status" TitleColor=@Color.Gold1 BorderColor=@Color.Gold1 Orientation="Horizontal">
        <Rows Gap="1">
            <Columns Spacing="2" Collapse="true">
                <Panel Title="Activity" TitleColor=@Color.Gold1 BorderColor=@Color.Gold1>
                    <Rows Gap="1">
                        <Spinner Message="Awaiting your input..." Style="yellow" SpinnerType="@SpinnerType" />
                        <RazorConsole.Components.Text Style="italic" Value="Enter a name below to refresh the greeting." />
                    </Rows>
                </Panel>
                <Panel Title="Next Step" TitleColor=@Color.Gold1 BorderColor=@Color.Gold1>
                    <Rows Gap="1">
                        <RazorConsole.Components.Text Style="grey53" Value="Use Rows, Columns, and Grid to compose complex layouts quickly." />
                        <Spacer Lines="1" />
                        <RazorConsole.Components.Text Style="grey53" Value="This section collapses into a stack on narrow terminals." />
                    </Rows>
                </Panel>
            </Columns>
        </Rows>
    </Panel>
</Rows>

@code {
    [Parameter]
    public required GreetingModel Model { get; set; }

    private string DisplayName => string.IsNullOrWhiteSpace(Model.Name) ? "Friend" : Model.Name;

    private string GreetingTitle => $"Hello, {DisplayName}!";

    private string DateLabel => Model.Date.ToString("dddd, MMMM d, yyyy");

    private string TimestampLabel => Model.Timestamp.ToString("HH:mm:ss");

    private string TimestampMessage => $"Now is {TimestampLabel}.";

    private bool HasTips => Model.Tips.Count > 0;

    private Spectre.Console.Spinner SpinnerType => Spectre.Console.Spinner.Known.Arc;
}